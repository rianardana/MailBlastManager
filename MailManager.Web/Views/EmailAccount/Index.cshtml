@model IEnumerable<MailManager.Web.ViewModel.EmailAccountVM>
@{
    ViewBag.Title = "Index";
    Layout = "~/Views/Shared/_Layout.cshtml";
}
<center><h3 style=" margin-bottom: 5px; color: dodgerblue; margin-bottom:25px" ><strong> Mail Configuration <i class="fas fa-cog"> </i></strong></h3></center>
<table table id="itemTable" class="table table-bordered table-striped table-sm">
    <thead>
        <tr>
            <th>
                @Html.DisplayNameFor(model => model.DisplayName)
            </th>

            <th>
                @Html.DisplayNameFor(model => model.Email)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Username)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Password)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.Port)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.EnableSsl)
            </th>
            <th>
                @Html.DisplayNameFor(model => model.UseDefaultCredentials)
            </th>
            <th>
                Action
            </th>
        </tr>
    </thead>
    <tbody>
        @foreach (var item in Model)
        {
            <tr>
                <td>
                    @Html.DisplayFor(modelItem => item.DisplayName)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.Email)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.Username)
                </td>
                <td>
                    <span class="password-mask"> **************** </span>
                    <span class="password-hidden" style="display: none;">@item.Password</span>
                    <a href="#" class="toggle-password">
                        <i class="fas fa-eye text-primary"></i>
                    </a>
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.Port)
                </td>

                <td>
                    @Html.DisplayFor(modelItem => item.EnableSsl)
                </td>
                <td>
                    @Html.DisplayFor(modelItem => item.UseDefaultCredentials)
                </td>


                <td>

                    <a href="@Url.Action("Edit", new { item.Id })" class="fas fa-pencil-alt text-info">

                    </a>


                </td>

            </tr>
        }
    </tbody>
</table>

<div class="d-flex gap-2">
    
    <a href="/Home/Index" class="btn btn-danger w-20">Back to Home</a>
</div>

<script>

   $(document).ready(function () {
        $(".toggle-password").click(function (e) {
            e.preventDefault();
            var parentTd = $(this).closest("td");
            var masked = parentTd.find(".password-mask");
            var actual = parentTd.find(".password-hidden");

            if (masked.is(":visible")) {
                masked.hide();
                actual.show();
                $(this).find("i").removeClass("fa-eye").addClass("fa-eye-slash");
            } else {
                masked.show();
                actual.hide();
                $(this).find("i").removeClass("fa-eye-slash").addClass("fa-eye");
            }
        });
    });</script>
